project (SYN)
set (SYN_VERSION_MAJOR 1)
set (SYN_VERSION_MINOR 0)

set(CMAKE_CXX_FLAGS "-std=c++0x -O3 -Wall")
set(CMAKE_CXX_FLAGS_DEBUG "-O0 -g -Wall")

cmake_minimum_required (VERSION 2.8)

file(GLOB_RECURSE CORE_MAIN_SOURCES src/main/cpp/core/*.cpp)
file(GLOB_RECURSE CORE_TEST_SOURCES src/test/cpp/core/*.cpp)
file(GLOB_RECURSE UTIL_MAIN_SOURCES src/main/cpp/util/*.cpp)
file(GLOB_RECURSE UTIL_TEST_SOURCES src/test/cpp/util/*.cpp)
file(GLOB_RECURSE SYN_MAIN_SOURCES src/main/cpp/syn/*.cpp)
file(GLOB_RECURSE SYN_TEST_SOURCES src/test/cpp/syn/*.cpp)

include_directories(${JAVA_HOME}/include})
include_directories(${JAVA_HOME}/include/linux)
include_directories(${SAFE_HOME}/include)
include_directories(SYSTEM /usr/local/include /usr/include)
link_directories(${CORE_MAIN_SOURCES} ${CORE_TEST_SOURCES})
link_directories(${JAVA_HOME}/jre/lib/${OS_ARCH})
link_directories(${JAVA_HOME}/jre/lib/${OS_ARCH}/client ${JAVA_HOME}/jre/lib/${OS_ARCH}/server)
link_directories(${SAFE_HOME}/lib/c++/LINUX)
link_directories(/usr/lib /usr/local/lib)

add_executable(core_test ${CORE_TEST_SOURCES} ${CORE_MAIN_SOURCES})
add_executable(util_test ${UTIL_MAIN_SOURCES} ${UTIL_TEST_SOURCES} ${CORE_MAIN_SOURCES})
add_executable(syn ${SYN_MAIN_SOURCES} ${CORE_MAIN_SOURCES} ${UTIL_MAIN_SOURCES})
# add_executable(syn_test ${SYN_TEST_SOURCES} ${UTIL_MAIN_SOURCES})

target_link_libraries(core_test cppunit netcdf netcdf_c++ Xfdu xerces-c xalan-c boost_system)
target_link_libraries(util_test cppunit netcdf netcdf_c++ Xfdu xerces-c xalan-c boost_system)
target_link_libraries(syn netcdf netcdf_c++ Safe Xfdu xerces-c xalan-c boost_system)
# target_link_libraries(syn_test netcdf netcdf_c++ Safe Xfdu cppunit xerces-c xalan-c)

set_property(TARGET core_test PROPERTY RUNTIME_OUTPUT_DIRECTORY target)
set_property(TARGET util_test PROPERTY RUNTIME_OUTPUT_DIRECTORY target)
set_property(TARGET syn PROPERTY RUNTIME_OUTPUT_DIRECTORY target)
# set_property(TARGET syn_test PROPERTY RUNTIME_OUTPUT_DIRECTORY target)
